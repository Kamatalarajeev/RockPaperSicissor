<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock-Paper-Scissor</title>
    <style>
      body {
        background-color: rgb(25, 25, 25);
        color: white;
        font-family: Arial, Helvetica, sans-serif;
      }
      .title {
        text-align: center;
        font-size: 30px;
        font-weight: bold;
      }
      .button-style {
        height: 120px;
        width: 120px;
        background-color: transparent;
        border: 3px solid white;
        border-radius: 100px;
        margin-right: 10px;
        padding: 10px;
        cursor: pointer;
      }
      .image-style {
        height: 50px;
      }
      .style-result {
        font-size: 24px;
        font-weight: bold;
        margin-top: 50px;
      }
      .style-score {
        margin-top: 60px;
      }
      .style-buttonreset {
        padding: 8px 10px;
        margin-top: 16px;
        font: 14px Arial, Helvetica, sans-serif;
        cursor: poiner;
        border: none;
      }
      .footer-style {
        margin-top: 100px;
        text-align: center;
        font-size: 14px;
        color: gray;
      }
    </style>
  </head>
  <body>
    <p class="title">Rock-Paper-Scissor game!</p>

    <!-- ROCK BUTTON -->
    <button
      class="button-style"
      onclick="
        playGame('rock');
    "
      onkeydown="handlepress(event);"
    >
      <img src="images/rock-emoji.png" class="image-style" />
    </button>
    <button
      class="button-style"
      onclick="
        playGame('paper');
    "
      onkeydown="handlepress(event);"
    >
      <img src="images/paper-emoji.png" class="image-style" />
    </button>

    <!-- SCISSOR BUTTON -->
    <button
      class="button-style"
      onclick="
        playGame('scissor');
    "
      onkeydown="handlepress(event);"
    >
      <img src="images/scissor-emoji.png" class="image-style" />
    </button>

    <p class="js-result style-result"></p>
    <p class="js-moves"></p>

    <p class="js-score style-score"></p>
    <button
      onclick="
    score.win=0;
    score.loss=0;
    score.tie=0 
    localStorage.removeItem('score');
    ScoreUpdate();
    "
      class="style-buttonreset"
    >
      Reset Score
    </button>
    <footer class="footer-style"> ♡ Made by Rajeev Kamatala ♡</footer>

    <script>
      let score = JSON.parse(localStorage.getItem("score")) || {
        // getting score from local storage
        win: 0,
        loss: 0,
        tie: 0,
      };

      ScoreUpdate();

      /*if (score === null) {
        score = {
          win: 0,
          loss: 0,
          tie: 0,
        };
      }*/
      function handlepress(event) {
        if (event.key === "r" || event.key === "R") {
          playGame("rock");
        } else if (event.key === "p" || event.key === "P") {
          playGame("paper");
        } else if (event.key === "s" || event.key === "S") {
          playGame("scissor");
        }
      }

      function playGame(userChoice) {
        const computerChoice = computeGame();
        let result = "";
        if (userChoice === "scissor") {
          if (computerChoice === "scissor") result = "It's Tie!";
          else if (computerChoice === "rock") result = "Computer wins!";
          else result = "You win!";
        }
        if (userChoice === "rock") {
          if (computerChoice === "rock") result = "It's Tie!";
          else if (computerChoice === "paper") result = "Computer wins!";
          else result = "You win!";
        }
        if (userChoice === "paper") {
          if (computerChoice === "paper") result = "It's Tie!";
          else if (computerChoice === "scissor") result = "Computer wins!";
          else result = "You win!";
        }
        if (result === "You win!") {
          score.win += 1;
        } else if (result === "Computer wins!") {
          score.loss += 1;
        } else {
          score.tie += 1;
        }
        ScoreUpdate();

        document.querySelector(".js-result").innerHTML = result;
        document.querySelector(".js-moves").innerHTML = `Your move
      <img src="images/${userChoice}-emoji.png" class="image-style" />
      <img src="images/${computerChoice}-emoji.png" class="image-style" />Computer's move`;

        localStorage.setItem("score", JSON.stringify(score)); // saving score to local storage
      }
      function ScoreUpdate() {
        document.querySelector(
          ".js-score"
        ).innerHTML = `Wins: ${score.win}, Losses: ${score.loss}, Ties: ${score.tie}`;
      }

      function computeGame() {
        let computerChoice = "";
        const random = Math.random();

        if (random < 1 / 3) computerChoice = "rock";
        else if (random < 2 / 3) computerChoice = "paper";
        else computerChoice = "scissor";
        return computerChoice;
        console.log("Never reached");
      }
    </script>
  </body>
</html>
